最近的公司的项目有个新的需求， 需要为用户的视频压制字幕。采用了前后端分离的形式来实现。前端的渲染界面没有使用libass的生态的组件，而是使用了konvasjs这个画板库。结果导致前端渲染的演示字幕的字体大小，远远大于ffmpeg渲染后的大小。
最开始的技术方案是计算出字体的大小的差异比例。先临时应用。
然后我在github上找到了一个libass的Python绑定。然后用pillow将libass的返回的矢量图生成图片。然后和前端的字体大小作比对。计算了换算关系之后就上线了。
但是用户还是反馈有问题。
偶然的情况下，我对比了pillow生成的图片和ffmpeg渲染的视频中的字幕，发现pillow渲染的字幕字体大小和ffmpeg渲染的字幕字体大小也是不一致的。（当然了这些fontsize的值都是同一个。）
# 本次总结
不同的渲染库可能渲染逻辑不一致，导致输出的结果也是不一致的。在技术选型的时候需要把前后端的一起来评估。特别是有样式调整的。（这次的错误就在于。前端选择框架的时候没有对比后端框架的实际输出结果。才导致了这个问题。）

现在改成了使用 libass wasm 方案。在字体大小的差异方面几乎是一致的。 
